(this.webpackJsonpfron_end_central=this.webpackJsonpfron_end_central||[]).push([[0],{186:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(57),c=n.n(a),s=n(12),i=n(9),o=n.n(i),u=n(11),l=n(25),p=n(18),d=n(26),f=n(199),j=n(2),b=function(e){var t=e.children;return Object(j.jsx)(f.a,{children:t})},h=n(201),x=function(e){var t=e.id,n=e.text,a=e.author,c=e.upCount,i=e.downCount,f=e.createdAt,b=e.updateCount,x=e.votes,v=Object(r.useState)([]),O=Object(l.a)(v,2),m=O[0],g=O[1],w=Object(r.useState)(!1),y=Object(l.a)(w,2),k=y[0],C=y[1],S=Object(s.f)(),I=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)();case 2:401===(t=e.sent).status&&S.push("/login"),g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.g)();case 2:t=e.sent,C(!0),x.map((function(e){e.userId===t&&C(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){N(),b(),I()}),[]);var z=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(t,"up");case 2:401===e.sent.status&&S.push("/login"),b(),I();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(t,"down");case 2:401===e.sent.status&&S.push("/login"),b(),I();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(h.a,{textAlign:"center",style:{lineHeight:1},verticalAlign:"middle",children:Object(j.jsxs)(h.a.Column,{style:{maxWidth:500},children:[Object(j.jsx)("p",{children:f}),Object(j.jsxs)("span",{style:{fontSize:15,fontWeight:600},children:["Author: ",a]}),Object(j.jsx)("p",{style:{fontSize:16,fontFamily:"monospace",marginTop:10},children:n}),m&&m.map((function(e){var n=e.id,r=e.postId,a=e.upVotes;return Object(j.jsx)(p.b,{to:"",style:{fontSize:25},onClick:function(e){e.preventDefault(),a||z(r)},children:t===r?Object(j.jsx)("i",{className:a?"thumbs up icon":"thumbs up outline icon"}):""},n)})),Object(j.jsx)(p.b,{to:"",style:{fontSize:25},onClick:function(e){C(!1),e.preventDefault(),z(t)},children:k?Object(j.jsx)("i",{className:"thumbs up outline icon"}):""}),Object(j.jsx)("span",{style:{fontSize:20,marginRight:40,fontWeight:600},children:c}),m&&m.map((function(e){var n=e.id,r=e.postId,a=e.downVotes;e.upVotes;return Object(j.jsx)(p.b,{to:"",style:{fontSize:25},onClick:function(e){e.preventDefault(),a||A(r)},children:t===r?Object(j.jsx)("i",{className:a?"thumbs down icon":"thumbs down outline icon"}):""},n)})),Object(j.jsx)(p.b,{to:"",style:{fontSize:25},onClick:function(e){C(!1),e.preventDefault(),A(t)},children:k?Object(j.jsx)("i",{className:"thumbs down outline icon"}):""}),Object(j.jsx)("span",{style:{fontSize:20,fontWeight:600},children:i})]})})},v=n(33),O=Object(r.createContext)();function m(){var e=Object(r.useContext)(O),t=e.loading,n=e.setLoading,a=Object(r.useState)([]),c=Object(l.a)(a,2),i=c[0],f=c[1],h=Object(s.f)();if(Object(r.useEffect)((function(){n(!0),m(),setTimeout((function(){return n(!1)}),1e3)}),[]),!Object(v.a)())return h.push("/login");var m=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)();case 2:t=e.sent,n=t.content,f(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(j.jsx)("div",{style:{height:500},className:"ui segment",children:Object(j.jsx)("div",{className:"ui active inverted dimmer",children:Object(j.jsx)("div",{className:"ui large text loader",children:"Loading"})})}):Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{children:Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(j.jsx)(p.b,{to:"/post",style:{fontSize:16},children:"Start a post?"}),Object(j.jsx)(p.b,{to:"/login",style:{fontSize:16},onClick:function(){localStorage.clear()},children:"Logout"})]})}),i&&i.map((function(e){var t=e.id,n=e.text,r=e.author,a=e.upCount,c=e.downCount,s=e.createdAt,i=e.votes;return Object(j.jsx)("div",{style:{width:"80vh"},className:"ui raised very padded text container segment",children:Object(j.jsx)(x,{id:t,text:n,author:r,upCount:a,downCount:c,createdAt:s,updateCount:m,votes:i})},t)}))]})}n(114);var g=n(198),w=n(203),y=n(200),k=function(e){var t=e.formData,n=t.userName,r=t.password,a=e.onInputChange,c=e.onHandleSubmit;return Object(j.jsx)(g.a,{size:"large",children:Object(j.jsxs)(w.a,{stacked:!0,children:[Object(j.jsx)(g.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",name:"username",value:n,onChange:function(e){return a(e)}}),Object(j.jsx)(g.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:r,onChange:function(e){return a(e)}}),Object(j.jsx)(y.a,{color:"blue",fluid:!0,size:"large",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Login"})]})})},C=n(204),S=function(e){var t=e.message;return Object(j.jsx)(C.a,{as:"h2",color:"blue",textAlign:"center",children:t})};function I(){var e=Object(r.useContext)(O),t=e.loading,n=e.setLoading,a=Object(s.f)(),c=Object(r.useState)(new Map),i=Object(l.a)(c,2),f=i[0],x=i[1];Object(r.useEffect)((function(){n(!0),setTimeout((function(){return n(!1)}),1e3)}),[]);var v=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;x((function(e){return new Map(e).set(n,r)}))}),[]),m=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.get("username"),n=f.get("password"),e.next=4,Object(d.e)(t,n);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",a.push("/home"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(j.jsx)("div",{style:{height:500},className:"ui segment",children:Object(j.jsx)("div",{className:"ui active inverted dimmer",children:Object(j.jsx)("div",{className:"ui large text loader",children:"Loading"})})}):Object(j.jsx)(h.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(j.jsxs)(h.a.Column,{style:{maxWidth:500},children:[Object(j.jsx)(S,{message:"Segware Login"}),Object(j.jsx)(k,{formData:f,onInputChange:v,onHandleSubmit:m}),Object(j.jsxs)(b,{children:["Already registered? ",Object(j.jsx)(p.b,{to:"/",children:"Sing Up"})]})]})})}var N=function(e){var t=e.formData,n=t.name,r=t.userName,a=t.password,c=e.onInputChange,s=e.onHandleSubmit;return Object(j.jsx)(g.a,{size:"large",children:Object(j.jsxs)(w.a,{stacked:!0,children:[Object(j.jsx)(g.a.Input,{fluid:!0,placeholder:"Name",value:n,name:"name",onChange:function(e){return c(e)}}),Object(j.jsx)(g.a.Input,{fluid:!0,placeholder:"Username",value:r,name:"username",onChange:function(e){return c(e)}}),Object(j.jsx)(g.a.Input,{fluid:!0,placeholder:"Password",value:a,type:"password",name:"password",onChange:function(e){return c(e)}}),Object(j.jsx)(y.a,{color:"blue",fluid:!0,size:"large",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Register"})]})})};function z(){var e=Object(r.useContext)(O),t=e.loading,n=e.setLoading,a=Object(r.useState)(new Map),c=Object(l.a)(a,2),i=c[0],f=c[1],x=Object(s.f)();Object(r.useEffect)((function(){n(!0),setTimeout((function(){return n(!1)}),1e3)}),[]);var v=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.get("name"),n=i.get("username"),r=i.get("password"),e.next=5,Object(d.d)(t,n,r);case 5:201===e.sent&&x.push("/login");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;f((function(e){return new Map(e).set(n,r)}))}),[]);return t?Object(j.jsx)("div",{style:{height:500},className:"ui segment",children:Object(j.jsx)("div",{className:"ui active inverted dimmer",children:Object(j.jsx)("div",{className:"ui large text loader",children:"Loading"})})}):Object(j.jsx)(h.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(j.jsxs)(h.a.Column,{style:{maxWidth:450},children:[Object(j.jsx)(S,{message:"Segware Register"}),Object(j.jsx)(N,{formData:i,onInputChange:m,onHandleSubmit:v}),Object(j.jsxs)(b,{children:["Alaready have account? ",Object(j.jsx)(p.b,{to:"/login",children:"Sing In"})]})]})})}var A=function(e){var t=e.postData.text,n=e.onInputChange,r=e.onHandleSubmit;return Object(j.jsx)(g.a,{size:"large",children:Object(j.jsxs)(w.a,{stacked:!0,children:[Object(j.jsx)(g.a.TextArea,{fluid:"true",placeholder:"Write a post",value:t,name:"text",onChange:function(e){return n(e)}}),Object(j.jsx)(y.a,{color:"blue",fluid:!0,size:"large",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Post"})]})})};function T(){var e=Object(r.useContext)(O),t=e.loading,n=e.setLoading,a=Object(r.useState)(new Map),c=Object(l.a)(a,2),i=c[0],f=c[1],x=Object(s.f)();Object(r.useEffect)((function(){n(!0),setTimeout((function(){return n(!1)}),1e3)}),[]);var m=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;f((function(e){return new Map(e).set(n,r)}))}),[]);if(!Object(v.a)())return x.push("/login");var g=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.get("text"),e.next=3,Object(d.b)(t);case 3:x.push("/home");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(j.jsx)("div",{style:{height:500},className:"ui segment",children:Object(j.jsx)("div",{className:"ui active inverted dimmer",children:Object(j.jsx)("div",{className:"ui large text loader",children:"Loading"})})}):Object(j.jsxs)("div",{className:"ui raised very padded text container segment",children:[Object(j.jsx)(b,{children:Object(j.jsx)(p.b,{to:"/home",children:"Back to posts"})}),Object(j.jsx)(h.a,{textAlign:"center",style:{height:"70vh"},verticalAlign:"middle",children:Object(j.jsxs)(h.a.Column,{style:{maxWidth:450},children:[Object(j.jsx)(S,{message:"Post a text"}),Object(j.jsx)(A,{postData:i,onInputChange:m,onHandleSubmit:g})]})})]})}var L=function(){return Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{exact:!0,path:"/",component:z}),Object(j.jsx)(s.a,{exact:!0,path:"/login",component:I}),Object(j.jsx)(s.a,{exact:!0,path:"/home",component:m}),Object(j.jsx)(s.a,{exact:!0,path:"/post",component:T})]})},E=function(){return Object(j.jsx)(L,{})};function D(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a={loading:n[0],setLoading:n[1]},c=e.children;return Object(j.jsx)(O.Provider,{value:a,children:c})}c.a.render(Object(j.jsx)(p.a,{forceRefresh:!0,children:Object(j.jsx)(D,{children:Object(j.jsx)(E,{})})}),document.getElementById("root"))},26:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return w}));var r=n(9),a=n.n(r),c=n(11),s=n(115),i=n.n(s),o=n(33),u="https://segware-post.herokuapp.com";function l(e,t){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function t(n,r){var c,s,i,l,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat(u,"/oauth/token"),s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+e.from("admin:admin").toString("base64")},body:"grant_type=password&username="+n+"&password="+r},t.prev=2,t.next=5,fetch(c,s);case 5:return i=t.sent,t.next=8,i.json();case 8:if(l=t.sent,p=l.access_token){t.next=12;break}return t.abrupt("return",alert("No Username or Invalid Password!"));case 12:return Object(o.b)(p),t.abrupt("return",p);case 16:if(t.prev=16,t.t0=t.catch(2),t.t0.response){t.next=20;break}return t.abrupt("return",alert("Internal server error! Code: 500"));case 20:d=t.t0.response.data,t.t0&&alert(d);case 22:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function d(e,t,n){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(t,n,r){var c,s,o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(u,"/api/v1/user"),s={name:t,username:n,password:r},e.prev=2,e.next=5,i.a.post(c,s);case 5:return o=e.sent,console.log(o),l=o.data.message,alert(l),e.abrupt("return",o.status);case 12:if(e.prev=12,e.t0=e.catch(2),e.t0.response){e.next=16;break}return e.abrupt("return",alert("Internal server error! Code: 500"));case 16:if((p=e.t0.response.data).fields){e.next=19;break}return e.abrupt("return",alert(p.title));case 19:e.t0&&p.fields.forEach((function(e){var t=e.name,n=e.message;alert(t+" > "+n)}));case 20:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function j(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(u,"/api/v1/post"),n=Object(o.a)(),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}},e.prev=3,e.next=6,fetch(t,r);case 6:return c=e.sent,e.abrupt("return",c.json());case 10:if(e.prev=10,e.t0=e.catch(3),!e.t0){e.next=14;break}return e.abrupt("return",alert("Invalid token or list not found!"));case 14:case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(u,"/api/v1/userUpVotes"),n=Object(o.a)(),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}},e.prev=3,e.next=6,fetch(t,r);case 6:return c=e.sent,e.abrupt("return",c.json());case 10:if(e.prev=10,e.t0=e.catch(3),!e.t0){e.next=14;break}return e.abrupt("return",alert("Invalid token or list not found!"));case 14:case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function v(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(u,"/api/v1/post"),r=Object(o.a)(),c={headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}},s={text:t},e.prev=4,e.next=7,i.a.post(n,s,c);case 7:l=e.sent,alert(l.data.message),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(4),e.t0.response){e.next=15;break}return e.abrupt("return",alert("Invalid token or list not found!"));case 15:if((p=e.t0.response.data).fields){e.next=18;break}return e.abrupt("return",alert(void 0===p.title?"Invalid token or list not found!":p.title));case 18:e.t0&&p.fields.forEach((function(e){var t=e.name,n=e.message;alert(t+" > "+n)}));case 19:case 20:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function m(e,t){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(u,"/api/v1/post/").concat(t,"/").concat(n),c=Object(o.a)(),s={method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer "+c}},e.prev=3,e.next=6,fetch(r,s);case 6:return i=e.sent,e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(3),e.t0.response){e.next=14;break}return e.abrupt("return",alert("Invalid token or list not found!"));case 14:if((l=e.t0.response.data).fields){e.next=17;break}return e.abrupt("return",alert(l.error_description));case 17:case 18:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(u,"/api/v1/userId"),n=Object(o.a)(),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}},e.prev=3,e.next=6,fetch(t,r);case 6:return c=e.sent,e.abrupt("return",c.json());case 10:if(e.prev=10,e.t0=e.catch(3),!e.t0){e.next=14;break}return e.abrupt("return",alert("Invalid token or list not found!"));case 14:case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}}).call(this,n(157).Buffer)},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return localStorage.setItem("token",JSON.stringify(e))},a=function(){return JSON.parse(localStorage.getItem("token"))}}},[[186,1,2]]]);
//# sourceMappingURL=main.0b34edcb.chunk.js.map